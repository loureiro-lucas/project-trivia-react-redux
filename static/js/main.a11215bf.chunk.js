(this["webpackJsonptrybe-trivia"]=this["webpackJsonptrybe-trivia"]||[]).push([[0],{102:function(e,t,a){e.exports=a(124)},107:function(e,t,a){},112:function(e,t,a){},115:function(e,t){},116:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),s=a(67),o=(a(107),a(21)),l=a(36),u=(a(112),a(169)),m=a(11),d=a.n(m),h=a(49),p=a(17),g=a(18),f=a(22),v=a(19),y=a(8),b=a(23),E=a(172),k=a(127),S=a(163),O=a(79),j=a.n(O),w=a(78),C=a.n(w),I=a(76),N=a.n(I),x=function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,d.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t.token);case 7:case"end":return a.stop()}}))},A=function(e){var t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 2:return t=n.sent,n.next=5,d.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}))},T=function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(fetch("https://opentdb.com/api_category.php"));case 2:return e=a.sent,a.next=5,d.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t.trivia_categories);case 7:case"end":return a.stop()}}))},R=function(e,t,a,n){var r,i,c,s,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=""===e?e:"&category=".concat(e),i=""===t?t:"&difficulty=".concat(t),c=""===a?a:"&type=".concat(a),l.next=5,d.a.awrap(fetch("https://opentdb.com/api.php?amount=5".concat(r).concat(i).concat(c,"&token=").concat(n)));case 5:return s=l.sent,l.next=8,d.a.awrap(s.json());case 8:return o=l.sent,l.abrupt("return",o);case 10:case"end":return l.stop()}}))},q=a(86),D=(a(116),a(77)),_=a.n(D),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={name:"",email:"",nameError:!1,emailError:!1},a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSettings=a.handleSettings.bind(Object(y.a)(a)),a.renderInputs=a.renderInputs.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.resetUser)()}},{key:"validateForm",value:function(){var e=this.state,t=e.name,a=e.email;return this.setState({nameError:!1,emailError:!1}),0===t.length&&this.setState({nameError:!0}),0===a.length&&this.setState({emailError:!0}),!(!t||!a)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleSettings",value:function(){this.props.history.push("/settings")}},{key:"handleSubmit",value:function(e){var t,a,n,r,i;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),!this.validateForm()){c.next=11;break}return c.next=4,d.a.awrap(x());case 4:t=c.sent,localStorage.setItem("token",t),a=this.state,n=a.name,r=a.email,i={player:{name:n,assertions:0,score:0,gravatarEmail:r}},localStorage.setItem("state",JSON.stringify(i)),this.props.history.push("/game");case 11:case"end":return c.stop()}}),null,this)}},{key:"renderInputs",value:function(){var e=this.state,t=e.name,a=e.email,n=e.nameError,i=e.emailError;return r.a.createElement("div",{className:"login-inputs"},r.a.createElement(E.a,{id:"input-player-name",name:"name",label:"Nome",variant:"outlined",size:"small",value:t,onChange:this.handleChange,error:n,helperText:n&&"Campo obrigat\xf3rio",required:!0}),r.a.createElement(E.a,{id:"input-gravatar-email",name:"email",label:"Email",variant:"outlined",size:"small",type:"email",value:a,onChange:this.handleChange,error:i,helperText:i&&"Campo obrigat\xf3rio",required:!0}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("img",{src:_.a,alt:"trivia-logo",className:"login-logo"}),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"login-form"},this.renderInputs(),r.a.createElement("div",{className:"login-buttons"},r.a.createElement(S.a,{variant:"contained"},r.a.createElement(k.a,{type:"submit",color:"primary",endIcon:r.a.createElement(C.a,null)},"Jogar"),r.a.createElement(k.a,{color:"secondary",onClick:this.handleSettings,endIcon:r.a.createElement(j.a,null)},"Configura\xe7\xf5es")))))}}]),t}(r.a.Component),J=Object(o.b)(null,(function(e){return{resetUser:function(){return e({type:"RESET_DATA"})}}}))(M),P=a(165),G=a(171),F=a(173),W=a(161),B=a(164),Q=a(80),V=a.n(Q),L=(a(118),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={categories:[],category:"",difficulty:"",questionsType:""},a.renderCategoriesOptions=a.renderCategoriesOptions.bind(Object(y.a)(a)),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a.renderCategoriesSelect=a.renderCategoriesSelect.bind(Object(y.a)(a)),a.renderDifficultySelect=a.renderDifficultySelect.bind(Object(y.a)(a)),a.renderTypeSelect=a.renderTypeSelect.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.renderCategoriesOptions()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.category,n=t.difficulty,r=t.questionsType;(0,this.props.setPreferences)([a,n,r]),this.props.history.push("/")}},{key:"renderCategoriesOptions",value:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(T());case 2:e=t.sent,this.setState({categories:e});case 4:case"end":return t.stop()}}),null,this)}},{key:"renderCategoriesSelect",value:function(){var e=this.state,t=e.categories,a=e.category;return r.a.createElement(W.a,{variant:"outlined",size:"small",fullWidth:"true"},r.a.createElement(F.a,{id:"category"},"Categorias"),r.a.createElement(G.a,{labelId:"category",id:"category-select",name:"category",label:"Categorias",value:a,onChange:this.handleChange},r.a.createElement(B.a,{value:""},"Todas"),t.map((function(e){var t=e.id,a=e.name;return r.a.createElement(B.a,{key:t,value:t},a)}))))}},{key:"renderDifficultySelect",value:function(){var e=this.state.difficulty;return r.a.createElement(W.a,{variant:"outlined",size:"small",fullWidth:"true"},r.a.createElement(F.a,{id:"difficulty"},"Dificuldade"),r.a.createElement(G.a,{labelId:"difficulty",id:"difficulty-select",name:"difficulty",label:"Dificuldade",value:e,onChange:this.handleChange},r.a.createElement(B.a,{value:""},"Todas"),r.a.createElement(B.a,{value:"easy"},"Easy"),r.a.createElement(B.a,{value:"medium"},"Medium"),r.a.createElement(B.a,{value:"hard"},"Hard")))}},{key:"renderTypeSelect",value:function(){var e=this.state.questionsType;return r.a.createElement(W.a,{variant:"outlined",size:"small",fullWidth:"true"},r.a.createElement(F.a,{id:"questionsType"},"Tipo de pergunta"),r.a.createElement(G.a,{labelId:"questionsType",id:"questionsType-select",name:"questionsType",label:"Tipo de pergunta",value:e,onChange:this.handleChange},r.a.createElement(B.a,{value:""},"Todos"),r.a.createElement(B.a,{value:"multiple"},"M\xfaltipla escolha"),r.a.createElement(B.a,{value:"boolean"},"Verdadeiro ou falso")))}},{key:"render",value:function(){return r.a.createElement("div",{className:"settings-container"},r.a.createElement(P.a,{variant:"h4",component:"h1"},"Configura\xe7\xf5es"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:"settings-form"},this.renderCategoriesSelect(),this.renderDifficultySelect(),this.renderTypeSelect(),r.a.createElement(k.a,{variant:"contained",type:"submit",color:"primary",endIcon:r.a.createElement(V.a,null)},"Salvar")))}}]),t}(r.a.Component)),U=Object(o.b)(null,(function(e){return{setPreferences:function(t){return e(function(e){var t=Object(q.a)(e,3);return{type:"GET_PREFERENCES",category:t[0],difficulty:t[1],questionsType:t[2]}}(t))}}}))(L),z=a(37),H=a(65),$=a(166),K=a(81),X=a.n(K),Y=(a(119),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={questions:[],index:0,randomAnswers:[],correctId:"correct",wrongId:"wrong",isAnswersDisabled:!1,counter:30,isButtonShow:!1,intervalId:""},a.getQuestions=a.getQuestions.bind(Object(y.a)(a)),a.setQuestionsinState=a.setQuestionsinState.bind(Object(y.a)(a)),a.createRandomArray=a.createRandomArray.bind(Object(y.a)(a)),a.handleClickAnswer=a.handleClickAnswer.bind(Object(y.a)(a)),a.setAnswerAsWrong=a.setAnswerAsWrong.bind(Object(y.a)(a)),a.setTimeLimitToAnswer=a.setTimeLimitToAnswer.bind(Object(y.a)(a)),a.handleClickNext=a.handleClickNext.bind(Object(y.a)(a)),a.renderCounter=a.renderCounter.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getQuestions(),this.setTimeLimitToAnswer()}},{key:"setQuestionsinState",value:function(e){var t=this.state.index;this.setState({questions:e});var a=e[t],n=a.correct_answer,r=a.incorrect_answers;this.createRandomArray(n,r)}},{key:"getQuestions",value:function(){var e,t,a,n,r,i,c,s,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=localStorage.getItem("token"),t=this.props,a=t.category,n=t.difficulty,r=t.type,""===a&&""===n&&""===r){l.next=10;break}return l.next=5,d.a.awrap(R(a,n,r,e));case 5:i=l.sent,c=i.results,this.setQuestionsinState(c),l.next=15;break;case 10:return l.next=12,d.a.awrap(A(e));case 12:s=l.sent,o=s.results,this.setQuestionsinState(o);case 15:case"end":return l.stop()}}),null,this)}},{key:"setAnswerAsWrong",value:function(){this.setState({isAnswersDisabled:!0,isButtonShow:!0})}},{key:"setTimeLimitToAnswer",value:function(){var e=this,t=setInterval((function(){e.setState((function(e){return{counter:e.counter>0?e.counter-1:0}}),(function(){0===e.state.counter&&e.setAnswerAsWrong()}))}),1e3);this.setState({intervalId:t})}},{key:"createRandomArray",value:function(e,t){var a=[{text:e,type:"correct"}].concat(Object(H.a)(t.map((function(e,t){return{text:e,type:"wrong",index:t}})))),n=a.sort((function(){return Math.random()>.5?1:-1}));this.setState({randomAnswers:n})}},{key:"handleClickAnswer",value:function(e){var t=e.currentTarget,a=this.state,n=a.questions,r=a.index,i=a.counter,c=n[r].difficulty,s=t.id,o=JSON.parse(localStorage.getItem("state")).player;if("correct"===s){var l=o.score+10+i*{hard:3,medium:2,easy:1}[c],u=o.assertions+1,m=JSON.stringify({player:Object(z.a)({},o,{score:l,assertions:u})});localStorage.setItem("state",m),(0,this.props.updateScore)(l)}this.setState({correctId:"correct-answered",wrongId:"wrong-answered",isButtonShow:!0})}},{key:"returnNextButton",value:function(){return r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:this.handleClickNext},"Pr\xf3xima pergunta",r.a.createElement(X.a,null))}},{key:"handleClickNext",value:function(){var e=this,t=this.state,a=t.index,n=t.intervalId,r=this.props.history;4===a?r.push("/feedback"):this.setState({index:a+1,correctId:"correct",wrongId:"wrong",counter:30,isButtonShow:!1,isAnswersDisabled:!1},(function(){var t=e.state,a=t.index,n=t.questions[a],r=n.correct_answer,i=n.incorrect_answers;e.createRandomArray(r,i),e.setTimeLimitToAnswer()})),clearInterval(n)}},{key:"renderCounter",value:function(){var e=this.state.counter;return r.a.createElement("div",{className:"counter-container"},r.a.createElement($.a,{variant:"determinate",color:"secondary",value:3.33*e}),r.a.createElement(P.a,{variant:"h5",color:"secondary",id:"counter-text"},e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.index,i=t.randomAnswers,c=t.correctId,s=t.wrongId,o=t.isAnswersDisabled,l=t.isButtonShow;return r.a.createElement("div",{className:"game-page-container"},a.length>0&&r.a.createElement(r.a.Fragment,null,this.renderCounter(),r.a.createElement(P.a,{variant:"overline",id:"question-category"},"Categoria:"," ".concat(a[n].category)),r.a.createElement("div",{className:"questions-container"},r.a.createElement(P.a,{variant:"body1"},a[n].question.replace(/&quot;/g,'"').replace(/&#039;/g,"'")),r.a.createElement("div",{className:"buttons-container"},r.a.createElement(S.a,{variant:"contained",size:"small"},i.map((function(t){return r.a.createElement(k.a,{key:t.text,id:"correct"===t.type?c:s,onClick:e.handleClickAnswer,disabled:o},t.text.replace(/&quot;/g,'"'))}))))),l&&this.returnNextButton()))}}]),t}(n.Component)),Z=Object(o.b)((function(e){var t=e.game;return{category:t.category,difficulty:t.difficulty,type:t.type}}),(function(e){return{updateScore:function(t){return e(function(e){return{type:"UPDATE_SCORE",score:e}}(t))}}}))(Y),ee=a(82),te=a.n(ee),ae=a(63),ne=a.n(ae),re=(a(120),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={assertions:0,score:0},a.restorePlayer=a.restorePlayer.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.restorePlayer(),this.setRanking()}},{key:"setRanking",value:function(){var e=this.props,t=e.userName,a=e.urlImage,n=e.score,r=localStorage.getItem("ranking"),i={name:t,score:n,picture:a};if(null===r)localStorage.setItem("ranking",JSON.stringify([i]));else{var c=JSON.parse(r),s=[].concat(Object(H.a)(c),[i]);localStorage.setItem("ranking",JSON.stringify(s))}}},{key:"restorePlayer",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;this.setState({score:e.score,assertions:e.assertions})}},{key:"returnFeedback",value:function(e){var t=this.state,a=t.score,n=t.assertions,i=this.props.history;return r.a.createElement("div",{className:"feedback-inside-container"},r.a.createElement(P.a,{variant:"h6"},e),r.a.createElement(P.a,{variant:"subtitle1",className:"score-feedback"},"Voc\xea acertou ".concat(n," ").concat(1===n?"quest\xe3o":"quest\xf5es",","),r.a.createElement("br",null)," um total de ".concat(a," ").concat(1===a?"ponto":"pontos","!")),r.a.createElement(S.a,{variant:"contained"},r.a.createElement(k.a,{color:"primary",onClick:function(){return i.push("/ranking")},id:"open-ranking-button"},"Ver Ranking",r.a.createElement(te.a,null)),r.a.createElement(k.a,{color:"primary",onClick:function(){return i.push("/")},id:"play-again-btn"},"Jogar Novamente",r.a.createElement(ne.a,null))))}},{key:"render",value:function(){var e=this.state.assertions;return r.a.createElement("div",{className:"feedback-container"},e<3?this.returnFeedback("Podia ser melhor..."):this.returnFeedback("Mandou bem!"))}}]),t}(r.a.Component)),ie=Object(o.b)((function(e){var t=e.game;return{userName:t.userName,urlImage:t.urlImage,score:t.score}}))(re),ce=a(174),se=a(162),oe=a(128),le=(a(121),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={ranking:[]},a.getRanking=a.getRanking.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getRanking()}},{key:"getRanking",value:function(){var e=JSON.parse(localStorage.getItem("ranking")),t=this.rankingSorter(e);this.setState({ranking:t})}},{key:"rankingSorter",value:function(e){return e.sort((function(e,t){return t.score-e.score}))}},{key:"render",value:function(){var e=this.state.ranking,t=this.props.history;return r.a.createElement("div",null,r.a.createElement(P.a,{variant:"h3",component:"h1",className:"ranking-title"},"Ranking"),r.a.createElement(se.a,{id:"ranking-container"},e.map((function(e,t){return r.a.createElement(oe.a,{key:t,className:"ranking-person",divider:!0},r.a.createElement(ce.a,{src:e.picture,alt:"ranking person"}),r.a.createElement(P.a,{variant:"h6",component:"p",className:"ranking-person-name"},e.name),r.a.createElement(P.a,{variant:"h6",component:"p",color:"primary"},e.score),r.a.createElement(P.a,{variant:"body"},1===e.score?"ponto":"pontos"))})),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return t.push("/")},id:"play-again-button"},"Jogar Novamente",r.a.createElement(ne.a,null))))}}]),t}(r.a.Component)),ue=a(170),me=a(167),de=a(168),he=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).handleGravatarImage=a.handleGravatarImage.bind(Object(y.a)(a)),a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.handleGravatarImage()}},{key:"handleGravatarImage",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.gravatarEmail,a=e.name,n=function(e){var t=N()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)}(t),r=this.props,i=r.urlGravatarImage,c=r.saveName;i(n),c(a)}},{key:"render",value:function(){var e=this.props,t=e.urlImage,a=e.userName,n=e.score,i=e.styleClass;return r.a.createElement(me.a,{position:"static"},r.a.createElement(de.a,null,r.a.createElement(ce.a,{src:t,alt:"profile-img"}),r.a.createElement(P.a,{variant:"h6",className:i},a),r.a.createElement(P.a,null,n," ","pontos!")))}}]),t}(r.a.Component),pe=Object(o.b)((function(e){var t=e.game;return{score:t.score,urlImage:t.urlImage,userName:t.userName}}),(function(e){return{urlGravatarImage:function(t){return e({type:"SAVE_URL_IMAGE",urlImage:t})},saveName:function(t){return e({type:"SAVE_USER_NAME",userName:t})}}}))(he),ge=Object(ue.a)({page:{backgroundColor:"#f9f9f9"},headerTitle:{flexGrow:1,paddingLeft:"24px"}});var fe=function(e){var t=e.children,a=ge();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{styleClass:a.headerTitle}),r.a.createElement("div",{className:a.page},t))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(32),ye=a(84),be=a(85),Ee={score:0,urlImage:"",userName:"",category:"",difficulty:"",type:""},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SCORE":return Object(z.a)({},e,{score:t.score});case"SAVE_URL_IMAGE":return Object(z.a)({},e,{urlImage:t.urlImage});case"SAVE_USER_NAME":return Object(z.a)({},e,{userName:t.userName});case"RESET_DATA":return Object(z.a)({},e,{score:0,urlImage:"",userName:""});case"GET_PREFERENCES":return Object(z.a)({},e,{category:t.category,difficulty:t.difficulty,type:t.questionsType});default:return e}},Se=Object(ve.combineReducers)({game:ke}),Oe=Object(ve.createStore)(Se,Object(ye.composeWithDevTools)(Object(ve.applyMiddleware)(be.a)));window.Cypress&&(window.store=Oe);var je=Oe;c.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:je},r.a.createElement((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(l.a,{path:"/settings",component:U}),r.a.createElement(fe,null,r.a.createElement(l.a,{path:"/game",component:Z}),r.a.createElement(l.a,{path:"/feedback",render:function(e){return r.a.createElement(ie,e)}}),r.a.createElement(l.a,{path:"/ranking",render:function(e){return r.a.createElement(le,e)}}))))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"}},[[102,1,2]]]);
//# sourceMappingURL=main.a11215bf.chunk.js.map